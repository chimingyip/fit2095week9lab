<div class="container">
    <div class="jumbotron text-center">
      <h1>Movies DB System</h1>
    </div>
    <!-- The navigation bar -->
    <nav class="navbar navbar-expand-sm bg-light">
      <ul class="navbar-nav">
        <li class="nav-item" style="padding-left:0.2in">
          <a class="btn btn-primary" (click)="changeSection(1)">Home</a>
        </li>
        <li class="nav-item" style="padding-left:0.2in">
          <a class="btn btn-primary" (click)="changeSection(2)">Add Movie</a>
        </li>
        <li class="nav-item" style="padding-left:0.2in">
          <a class="btn btn-primary" (click)="changeSection(3)">Add an Actor</a>
        </li>
        <li class="nav-item" style="padding-left:0.2in">
          <a class="btn btn-primary" (click)="changeSection(4)">Delete Movie</a>
        </li>
        <li class="nav-item" style="padding-left:0.2in">
          <a class="btn btn-primary" (click)="changeSection(5)">Delete Movie By Title</a>
        </li>
        <li class="nav-item" style="padding-left:0.2in">
          <a class="btn btn-primary" (click)="changeSection(6)">Delete Movies by Year</a>
        </li>
      </ul>
    </nav>
    <!-- Section 1: Display all in a table -->
    <div class="section" *ngIf="section==1">
      <table class="table table-striped">
        <tr>
          <th>Title</th>
          <th>Year</th>
          <th>Actors</th>
        </tr>
        <tr *ngFor="let item of moviesDB">
          <td>{{item.title}}</td>
          <td>{{item.year}}</td>
          <td>
            <span *ngFor="let x of item.actors; index as i">
              {{item.actors[i].name}} <br>
            </span>
          </td>
          <!-- <td>{{item.actors}}</td> -->
        </tr>
      </table>
    </div>
    <!-- Section 2: Add new movie -->
    <div class="section" *ngIf="section==2">
      <div class="form-group">
        <label for="movieTitle">Title</label>
        <input type="text" class="form-control" id="movieTitle" [(ngModel)]="title">
      </div>
      <div class="form-group">
        <label for="year">Year Released</label>
        <input type="number" class="form-control" id="year" [(ngModel)]="year">
      </div>
      <button type="submit" class="btn btn-primary" (click)="onSaveMovie()">Save Movie</button>
    </div>
    <!-- Section 3: Update actor -->
    <!-- <div class="section" *ngIf="section==3">
      <table class="table table-striped">
        <tr>
          <th>Name</th>
          <th>Birth Year</th>
          <th>Select!</th>
        </tr>
        <tr *ngFor="let item of actorsDB">
          <td>{{item.name}}</td>
          <td>{{item.bYear}}</td>
          <td><button type="submit" class="btn btn-primary" (click)="onSelectUpdate(item)">Update</button></td>
        </tr>
      </table>
      <hr>
      <div *ngIf="actorsDB.length>0">
        <div class="form-group">
          <label for="actorName">Full Name</label>
          <input type="text" class="form-control" id="actorName" [(ngModel)]="fullName">
        </div>
        <div class="form-group">
          <label for="actorName">Birth Year</label>
          <input type="number" class="form-control" id="actorName" [(ngModel)]="bYear">
        </div>
        <button type="submit" class="btn btn-primary" (click)="onUpdateActor()">Update Actor</button>
      </div>
    </div> -->
    <!-- Section 3: add movie to actor-->
    <div class="section" *ngIf="section==3">
      <br>
      <ul class="navbar-nav">
          <li class="nav-item" style="padding-left:0.2in">
            <a class="btn btn-danger" (click)="onActiveActors()">refresh active actors list</a>
          </li>
          </ul>
          <br>

      <form>
      <div class="form-group col-md-4">
          add actor
          <label for="actors"></label>
          <select class="form-select" name = "actorlist" [(ngModel)]=x >
            <option *ngFor="let x of actorsDB1" [ngValue] = 'x'>{{x.name}} </option>
          </select>
          <br>
          to movie
          <label for="movies"></label>
          <select class="form-select" name = "actorlist" [(ngModel)]=i >
            <option *ngFor="let i of moviesDB" [ngValue]="i" >{{i.title}}   </option>
            
          </select>
          <br>
          <div>
          <button class="btn btn-primary mr-3 ml-3" (click) ="onAddActorToMovie()" >add actor to movie  <span class="badge badge-light"></span></button>
          </div>
      </div>
      </form>
      <br>
    </div>
    <!-- Section 4: Delete Movie -->
    <div class="section" *ngIf="section==4">
      <table class="table table-striped">
        <tr>
          <th>Title</th>
          <th>Year</th>
          <th>Delete?</th>
        </tr>
        <tr *ngFor="let item of moviesDB">
          <td>{{item.title}}</td>
          <td>{{item.year}}</td>
          <td><button type="submit" class="btn btn-primary" (click)="onDeleteMovie(item)">Delete</button></td>
        </tr>
      </table>
    </div>
    <!-- Section 5: Delete Movie By Title-->
    <div class="section" *ngIf="section==5">
      <div class="form-group">
        <label for="movieTitle">Title</label>
        <input type="text" class="form-control" id="movieTitle" [(ngModel)]="aTitle">
      </div>
      <button type="submit" class="btn btn-primary" (click)="onDeleteMovieByTitle(aTitle)">Delete Movie</button>
    </div>
    <!-- Section 6: Delete Movie by Year-->
    <div class="section" *ngIf="section==6">
      <div class="form-group">
        <label for="year1">From</label>
        <input type="number" class="form-control" id="year1" [(ngModel)]="aYear1">
      </div>
      <div class="form-group">
        <label for="year2">To</label>
        <input type="number" class="form-control" id="year2" [(ngModel)]="aYear2">
      </div>
      <button type="submit" class="btn btn-primary" (click)="onDeleteMoviesByYear(aYear1, aYear2)">Delete Movies</button>
    </div>
  </div>